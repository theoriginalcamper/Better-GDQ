{"version":3,"sources":["scripts/discord-contentscript.js"],"names":["$","document","ready","addTwitchSwitch","html","append","bootstrapSwitch","updateTwitchPlayer","msg","console","log","hasClass","userListStatus","click","twitchActive","updateDiscordUI","before","width","height","outerHeight","remove","parent","css","next","margin-right","margin-left","removeAttr","checkLinks","setInterval","length","clearInterval","on","event","state","checkForActiveGuild","this","has","uiUpdate","text"],"mappings":"AAAA,YAEAA,GAAEC,UAAUC,MAAM,WA2Bd,QAASC,KACLH,EAAE,UAAUI,KAAK,iIACjBJ,EAAE,kBAAkBK,OAAO,yEAE3BL,EAAE,kCAAkCM,kBAGxC,QAASC,GAAmBC,GACb,OAAPA,GACAC,QAAQC,IAAI,wDAERV,EAAE,uCAAuCW,SAAS,WAClDC,GAAiB,EACjBZ,EAAE,uCAAuCa,SAEzCD,GAAiB,EAGrBZ,EAAE,iBAAiBa,QAEnBC,GAAe,EAEfC,EAAgB,OAEhBf,EAAE,QAAQgB,OAAO,6CAAkDhB,EAAEC,UAAUgB,QAAUjB,EAAE,mBAAmBiB,QAAUjB,EAAE,qBAAqBiB,SAAW,gBAAkBjB,EAAEC,UAAUiB,SAAWlB,EAAE,eAAemB,cAAgBnB,EAAE,UAAUmB,eAAiB,0CAA4CnB,EAAE,eAAemB,cAAgB,aAAenB,EAAE,mBAAmBiB,QAAU,gNAC9W,UAAPT,IACPC,QAAQC,IAAI,yDACZV,EAAE,qBAAqBoB,SACvBN,GAAe,EACfC,EAAgB,UAEM,GAAlBH,GACAZ,EAAE,uCAAuCa,SAKrD,QAASE,GAAgBP,GACrBC,QAAQC,IAAI,iBAAmBI,GACpB,OAAPN,GACAC,QAAQC,IAAI,0BACZV,EAAE,qBAAqBqB,SAASC,IAAI,cAAe,YACnDtB,EAAE,qBAAqBsB,IAAI,QAAS,OACpCtB,EAAE,qBAAqBuB,KAAK,QAAQD,KAAML,MAAS,MAAOO,eAAgB,KAAMC,cAAe,SACjF,UAAPjB,IACPC,QAAQC,IAAI,iCACZV,EAAE,qBAAqBqB,SAASK,WAAW,SAC3C1B,EAAE,qBAAqB0B,WAAW,SAClC1B,EAAE,qBAAqBuB,KAAK,QAAQG,WAAW,UA1EvDjB,QAAQC,IAAI,kBAEZD,QAAQC,IAAIV,EAAE,qBAEd,IAAIY,GAAiB,KACjBE,GAAe,EAEfa,EAAaC,YAAY,WACrB5B,EAAE,UAAU6B,OAAS,IAErBpB,QAAQC,IAAI,6BACZP,IACA2B,cAAcH,GAEd3B,EAAE,uCAAuC+B,GAAG,+BAAgC,SAAUC,EAAOC,GACzFxB,QAAQC,IAAI,0BACZD,QAAQC,IAAIV,EAAE,kCAAkCM,gBAAgB,UAE5DC,EADAP,EAAE,uCAAuCM,gBAAgB,SACtC,MAEA,cAIhC,KAsDC4B,EAAsBN,YAAY,WAC9B5B,EAAE,aAAa6B,OAAS,IAExB7B,EAAE,UAAU+B,GAAG,QAAS,WACpB,GAAIjB,EACA,GAAId,EAAEmC,MAAMC,IAAI,6DAA6DP,OAAS,EAAG,CACrF7B,EAAE,qBAAqBsB,IAAI,UAAW,GACtC,IAAIe,GAAWT,YAAY,WACnB5B,EAAE,iBAAiB6B,OAAS,GAA8C,kBAAzC7B,EAAE,6BAA6BsC,SAEhEvB,EAAgB,OAChBe,cAAcO,KAEnB,SAEHrC,GAAE,qBAAqBsB,IAAI,UAAW,QACtCP,EAAgB,YAK5Be,cAAcI,KAEnB","file":"scripts/discord-contentscript.js","sourcesContent":["\"use strict\";\n\n$(document).ready(function () {\n    console.log(\"Hello Discord!\");\n\n    console.log($('.messages-wrapper'));\n\n    var userListStatus = null;\n    var twitchActive = false;\n\n    var checkLinks = setInterval(function () {\n        if ($(\".topic\").length > 0) {\n            // Check if element has been found\n            console.log('Add Switch to Links Panel');\n            addTwitchSwitch();\n            clearInterval(checkLinks);\n\n            $('input[name=\"twitch-player-display\"]').on('switchChange.bootstrapSwitch', function (event, state) {\n                console.log('Clicked Twitch Switch.');\n                console.log($(\"[name='twitch-player-display']\").bootstrapSwitch('state'));\n                if ($('input[name=\"twitch-player-display\"]').bootstrapSwitch('state')) {\n                    updateTwitchPlayer('add');\n                } else {\n                    updateTwitchPlayer('remove');\n                }\n            });\n        }\n    }, 1000);\n\n    function addTwitchSwitch() {\n        $('.links').html('<div id=\"twitch-switch\"><label for=\"twitch-player-display\" id=\"twitch-player-display-label\">Twitch Player Embed</label></div>');\n        $('#twitch-switch').append(\"<input type=\\\"checkbox\\\" data-size=\\\"mini\\\" name=\\\"twitch-player-display\\\">\");\n\n        $(\"[name='twitch-player-display']\").bootstrapSwitch();\n    }\n\n    function updateTwitchPlayer(msg) {\n        if (msg == 'add') {\n            console.log('Switch is on. Adding Twitch iframe and modifying UI.');\n\n            if ($('.header-toolbar button:nth-child(2)').hasClass('active')) {\n                userListStatus = true;\n                $('.header-toolbar button:nth-child(2)').click();\n            } else {\n                userListStatus = false;\n            }\n\n            $('button.active').click();\n\n            twitchActive = true;\n\n            updateDiscordUI('add');\n\n            $('.app').before(\"<div id=\\\"twitch-container\\\" style=\\\"width: \" + ($(document).width() - $('.guilds-wrapper').width() - $('.messages-wrapper').width()) + \"px; height: \" + ($(document).height() - $('.title-wrap').outerHeight() - $('.links').outerHeight()) + \"px; position: fixed; z-index:100; top: \" + $('.title-wrap').outerHeight() + \"px; left: \" + $('.guilds-wrapper').width() + \"px;\\\"><iframe id=\\\"twitch-embed\\\" src=\\\"https://player.twitch.tv/?channel=gamesdonequick\\\" width=\\\"100%\\\" height=\\\"100%\\\" frameborder=\\\"0\\\" scrolling=\\\"no\\\" allowFullscreen=\\\"true\\\" class=\\\"center-block\\\"></iframe></div>\");\n        } else if (msg == 'remove') {\n            console.log('Switch is off. Removing Twitch iframe and UI changes.');\n            $('#twitch-container').remove();\n            twitchActive = false;\n            updateDiscordUI('remove');\n\n            if (userListStatus == true) {\n                $('.header-toolbar button:nth-child(2)').click();\n            }\n        }\n    }\n\n    function updateDiscordUI(msg) {\n        console.log(\"TwitchActive: \" + twitchActive);\n        if (msg == 'add') {\n            console.log(\"Rearranging Discord UI\");\n            $('.messages-wrapper').parent().css('align-items', 'flex-end');\n            $('.messages-wrapper').css('width', '48%');\n            $('.messages-wrapper').next('form').css({ 'width': '46%', 'margin-right': '2%', 'margin-left': '0px' });\n        } else if (msg == 'remove') {\n            console.log(\"Discord UI returned to normal\");\n            $('.messages-wrapper').parent().removeAttr('style');\n            $('.messages-wrapper').removeAttr('style');\n            $('.messages-wrapper').next('form').removeAttr('style');\n        }\n    }\n\n    var checkForActiveGuild = setInterval(function () {\n        if ($(\".selected\").length > 0) {\n            // Check if element has been found\n            $('.guild').on('click', function () {\n                if (twitchActive) {\n                    if ($(this).has('a[href=\"/channels/140605087511740416/140605087511740416\"]').length > 0) {\n                        $('#twitch-container').css('display', '');\n                        var uiUpdate = setInterval(function () {\n                            if ($('.guild-header').length > 0 && $('.guild-header header span').text() == 'GamesDoneQuick') {\n\n                                updateDiscordUI('add');\n                                clearInterval(uiUpdate);\n                            }\n                        }, 1000);\n                    } else {\n                        $('#twitch-container').css('display', 'none');\n                        updateDiscordUI('remove');\n                    }\n                }\n            });\n\n            clearInterval(checkForActiveGuild);\n        }\n    }, 1000);\n});"],"sourceRoot":"/source/"}